# Learning Engine — Auto-Generation Schema (Immutable)

**Purpose:** Define the gold-standard architecture for every learning page generated by the Learning Engine. This schema is the contract for Crafts, STEM, Science, Biography, Culture, and related topics. Lock this and build on it.

---

## 1. Core philosophy (non-negotiable)

Learning is:

- **Interconnected** (mycelium model) — pages link to each other and to trivia/games
- **Non-linear** — curiosity leads, not curriculum
- **Exploratory** — every page stands alone and connects outward

Every generated page must:

- Stand alone
- Connect outward (cross-links)
- Feed trivia, games, and discovery systems
- Scale without losing quality

---

## 2. Minimal input parameters

When you run the system, you provide only:

| Parameter | Type | Example |
|-----------|------|---------|
| `topic_type` | `craft \| stem \| science \| biography \| culture \| media \| theory \| geography` | `"craft"` |
| `primary_topic` | string | `"Slime"`, `"Nikola Tesla"`, `"Time Travel"` |
| `target_audience` | array | `["kids", "teens", "adults", "mixed"]` |
| `depth_level` | `overview \| standard \| deep_dive` | `"standard"` |
| `image_density` | `low \| medium \| high` | `"medium"` |
| `learning_goals` | array | `["hands-on understanding", "conceptual learning", "fun & curiosity", "real-world connection"]` |

Everything else (sections, tiers, cross-links, trivia seeds) is **auto-derived** or filled from this backbone.

---

## 3. Page section IDs (the backbone)

Every page has **exactly these section IDs**. No optional sections; all must be present and non-empty.

| Section ID | Purpose |
|------------|--------|
| `hero_intro` | Hook and context; why this topic |
| `quick_wow` | Immediate payoff; “wow” moment |
| `core_concepts` | Scientific or conceptual explanation |
| `hands_on_or_examples` | Steps, materials, or concrete examples |
| `difficulty_tiers` | Quick Win / Explorer / Deep Dive (see below) |
| `variations_and_experiments` | Try this too; variables to test |
| `real_world_connections` | Where this shows up in life and industry |
| `cross_links` | Related concepts, crafts, biographies, culture, modern use |
| `trivia_seeds` | Raw facts for bingo, quizzes, call-and-response |
| `further_exploration` | Go deeper; next steps |

**Implementation:** `frontend/src/types/learningEngineSchema.ts` — `ENGINE_SECTION_IDS`, `REQUIRED_SECTION_IDS`, `EngineSectionId`.

---

## 4. Difficulty tiers (mandatory)

Every topic must include three tiers that **build on each other**:

| Tier | Name | Description |
|------|------|-------------|
| **Tier 1** | Quick Win | Immediate payoff, low effort, high visual/conceptual reward. “I get it now.” |
| **Tier 2** | Explorer | Introduces variables; encourages testing and comparison; cause-and-effect thinking. |
| **Tier 3** | Deep Dive | Real science, theory, or systems; optional math/history/modeling; connects to other domains. |

Each tier has: `tier`, `title`, `description`, optional `relatedTopicId`.

**Implementation:** `DifficultyTiersBlock`, `DifficultyTier` in `learningEngineSchema.ts`.

---

## 5. Cross-link system (the mycelium)

Every page must have **at least 3 and at most 8** cross-links.

| Type | Meaning | Example |
|------|---------|---------|
| `concept_link` | Related scientific principle | Non-Newtonian fluids |
| `craft_link` | Hands-on project that reinforces this | Oobleck, Baking soda volcano |
| `biography_link` | Person who advanced this idea | Nikola Tesla |
| `culture_link` | Movie, book, or story | Ghostbusters slime |
| `modern_use_link` | How this appears today | Shock absorbers |

**Implementation:** `CrossLink`, `CrossLinkType`, `MIN_CROSS_LINKS`, `MAX_CROSS_LINKS` in `learningEngineSchema.ts`.

---

## 6. Trivia seeds (not questions yet)

Each page outputs **at least 5** trivia seeds. These are **raw material** for:

- Bingo clues  
- Quiz questions  
- Call-and-response  
- Games  

| Seed type | Use |
|-----------|-----|
| `fact` | Straight fact |
| `cause_effect` | Cause-and-effect statement |
| `true_false_candidate` | Becomes a true/false question |
| `misconception` | Common myth to correct |
| `historical_note` | History or origin |

**Implementation:** `TriviaSeed`, `TriviaSeedType`, `MIN_TRIVIA_SEEDS` in `learningEngineSchema.ts`.

---

## 7. Image slot rules

- **Minimum images:** 3 per page (by default; can scale with `depth_level`).
- **Placement:** Section-aware. Hero in `hero_intro`; diagrams in `core_concepts`; step visuals in `hands_on_or_examples`.
- **Metadata required:** Source, license type, attribution text, confidence score (legal safety).
- **Empty slots:** Do not publish incomplete pages if required slots are unfilled (configurable; see validation).

**Implementation:** `IMAGE_RULES`, `EngineImageSlotMeta` in `learningEngineSchema.ts`. Existing image validation lives in `learningEngine.ts` and `LearningPageView`.

---

## 8. Automated validation

Before a page is considered **complete**, the system runs:

| Check | Rule |
|-------|------|
| All sections present | Every `REQUIRED_SECTION_IDS` appears in `sections`. |
| Cross-links | `cross_links.length >= 3`. |
| Difficulty tiers | All three tiers populated (title + description). |
| Trivia seeds | `trivia_seeds.length >= 5`. |
| No placeholders | No `[TODO]`, `[TBD]`, or empty content. |

**Implementation:** `frontend/src/lib/learningEngineValidation.ts` — `validateGeneratedPage(page)`. Returns `{ valid: boolean, errors: string[] }`. If validation fails, the system should **not** publish; re-run or fix that section.

---

## 9. Output and rendering

- **Engine output:** `GeneratedLearningPage` (see `learningEngineSchema.ts`).
- **Rendering:** Convert to canonical `LearningPage` via `generatedPageToLearningPage()` so `LearningPageView` can render it.
- **Format:** Structured data (TypeScript/JSON). Stable section IDs, machine-readable metadata, human-readable prose. No summaries, no “future work” placeholders, no fluff.

---

## 10. Where it lives in the codebase

| Item | Path |
|------|------|
| Schema (types, section IDs, constants) | `frontend/src/types/learningEngineSchema.ts` |
| Validation + converter | `frontend/src/lib/learningEngineValidation.ts` |
| Example engine page (Slime) | `frontend/src/data/learningEnginePages/slimePage.ts` |
| Learn grid + card routing | `frontend/src/pages/Learn.tsx`, `frontend/src/pages/LearnCard.tsx` |
| Canonical page type + renderer | `frontend/src/types/learningEngine.ts`, `frontend/src/components/LearningPageView.tsx` |

---

## 11. Next steps (recommended order)

1. **Lock this schema** — Treat `ENGINE_SECTION_IDS`, `REQUIRED_SECTION_IDS`, and the validation rules as immutable. Extend only via new topic types or optional fields that don’t break existing pages.
2. **Apply to one Crafts/STEM page** — ✅ Slime is the first; add more (e.g. Volcano, Oobleck) in engine format as needed.
3. **Apply to one Biography** — Map Tesla (or another) into `GeneratedLearningPage` with the same 10 sections and tiers.
4. **Apply to one Culture page** — Map Time Travel into the engine format for consistency.
5. **Geography** — **Ready.** `topic_type: "geography"` is in the schema; Learn & Grow has a **Geography** section. All geography pages use the same 10-section backbone, difficulty tiers, cross-links, and trivia seeds.
6. **Automate ingestion + validation** — Pipeline that accepts input params, generates or fetches content, runs `validateGeneratedPage`, and only then converts and publishes.

This is the foundation for a **curiosity engine**: interconnected, scalable, and feeding trivia and discovery everywhere.
