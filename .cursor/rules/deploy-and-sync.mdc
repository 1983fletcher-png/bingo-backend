---
description: How to push to GitHub and sync frontend to the live app from Cursor
globs: 
alwaysApply: false
---

# Deploy and sync from Cursor

## Pushing to GitHub — always use the token from Cursor

**Do not run plain `git push origin main`** from Cursor; it will fail with "could not read Username" / "Device not configured" because there is no interactive auth.

**Always use the GitHub token:**

1. **GITHUB_TOKEN** must be set (e.g. in this repo's **.env** or **env** file, or in Cursor env). See **docs/GITHUB-PUSH-AND-SYNC-SETUP.md**.
2. **When pushing this repo (Music Bingo Backend):**  
   Source the env, then run the token script:
   ```bash
   cd "/path/to/Music Bingo Backend"
   [ -f .env ] && set -a && source .env && set +a
   [ -f env ] && set -a && source env && set +a
   export GITHUB_TOKEN
   ./scripts/git-push-with-token.sh
   ```
   Or run **./scripts/deploy-playroom.sh** (it uses the script and loads .env/env).
3. **When pushing music-bingo-app:**  
   From the app repo, run the **backend's** token script so GITHUB_TOKEN is used:
   ```bash
   cd "/path/to/music-bingo-app"
   [ -f ../Music\ Bingo\ Backend/.env ] && set -a && source ../Music\ Bingo\ Backend/.env && set +a
   export GITHUB_TOKEN
   /path/to/Music\ Bingo\ Backend/scripts/git-push-with-token.sh
   ```
   Or use **sync-and-push-roll-call.sh** from the backend (it pushes the app with the token).

**Rule:** From now on, any push from Cursor must use the token (script or deploy/sync scripts that call it). This keeps pushes smooth and avoids auth errors.

## Syncing frontend to the live site (music-bingo-app)

- The **live site** (Netlify) is built from the **music-bingo-app** repo. That repo is the **UI source of truth** (design system, nav, landing page, themes).
- **Do not** run full frontend sync from this repo into music-bingo-app — it would overwrite the app's design. See **docs/FRONTEND-ARCHITECTURE.md**.
- **Safe sync:** **sync-and-push-roll-call.sh** — copies only Roll Call–related files into music-bingo-app, then commits and pushes. Use when updating Roll Call logic/maps only.
- **Everything else:** Implement or port features **in music-bingo-app** using its components and CSS. Backend: add API/socket here; app calls it and renders with its own UI.
- **Path to music-bingo-app:** User sets **MUSIC_BINGO_APP_PATH**, or scripts try `..` and `../music-bingo-app`, or user passes the path as the first argument.

## When to run what

- **Backend-only changes:** Run `./scripts/deploy-playroom.sh` (commits if needed, pushes this repo with GITHUB_TOKEN).
- **Roll Call updates:** Run `./scripts/sync-and-push-roll-call.sh` (syncs only Roll Call files to the app and pushes).
- **Landing page, copy, or new UI:** Edit **music-bingo-app** directly; commit and push that repo (Netlify deploys).
- **One-time setup:** See **docs/GITHUB-PUSH-AND-SYNC-SETUP.md** (PAT, GITHUB_TOKEN, MUSIC_BINGO_APP_PATH).
