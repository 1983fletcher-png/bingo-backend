/**
 * Theme tokens — data-theme, data-scene, data-motion driven.
 * Base tokens + theme/scene/motion variants.
 */

:root {
  --pr-font-ui: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
  --pr-font-display: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
  --pr-weight-heading: 600;
  --pr-weight-body: 400;
  --pr-radius-sm: 6px;
  --pr-radius-md: 10px;
  --pr-radius-lg: 14px;
  --pr-radius-xl: 20px;
  --pr-shadow-sm: 0 1px 3px rgba(0,0,0,0.25);
  --pr-shadow-md: 0 4px 16px rgba(0,0,0,0.3);
  --pr-shadow-lg: 0 8px 32px rgba(0,0,0,0.35);
  --pr-easing: cubic-bezier(0.4, 0, 0.2, 1);
  --pr-motion-fast: 1;
  --pr-motion-med: 1;
  --pr-motion-slow: 1;
  --pr-duration-fast: 150ms;
  --pr-duration-med: 250ms;
  --pr-duration-slow: 400ms;
}

:root, [data-theme="classic"] {
  --pr-bg: #0b0f14;
  --pr-surface: #121826;
  --pr-surface2: #182033;
  --pr-text: #e8eefc;
  --pr-text-muted: rgba(232,238,252,0.72);
  --pr-muted: #9aa3ad;
  --pr-border: rgba(232,238,252,0.12);
  --pr-brand: #e8b923;
  --pr-brand2: #c99700;
  --pr-accent: #7df9ff;
  --pr-accent-contrast: #0b0f14;
  --pr-success: #34c759;
  --pr-warning: #ff9f0a;
  --pr-danger: #ff3b30;
  --pr-glow: #e8b923;
  --pr-noise-opacity: 0.02;
  --pr-glow-strength: 0.15;
  --pr-vignette-opacity: 0;
  --pr-scanlines-opacity: 0;
  --stage-overlay: none;
}

/* Theme overlay textures (Vite public path — no 404s) */
[data-theme="prestige"] { --stage-overlay: url("/themes/overlays/overlay-prestige.webp"); }
[data-theme="retro"] { --stage-overlay: url("/themes/overlays/overlay-retro.webp"); }
[data-theme="retro-arcade"] { --stage-overlay: url("/themes/overlays/overlay-arcade.webp"); }

[data-theme="prestige"] {
  --pr-bg: #0d0d0f;
  --pr-surface: #16161a;
  --pr-surface2: #1e1e24;
  --pr-text: #f0f0f2;
  --pr-muted: #9898a0;
  --pr-border: rgba(240,240,242,0.1);
  --pr-brand: #c9a227;
  --pr-brand2: #a67c00;
  --pr-accent: #d4af37;
  --pr-glow: #c9a227;
  --pr-noise-opacity: 0.015;
  --pr-glow-strength: 0.12;
}

[data-theme="retro"] {
  --pr-bg: #0f1216;
  --pr-surface: #1a1f26;
  --pr-surface2: #242b33;
  --pr-text: #e6edf2;
  --pr-muted: #8b9cad;
  --pr-border: rgba(230,237,242,0.14);
  --pr-brand: #58a6ff;
  --pr-brand2: #388bfd;
  --pr-accent: #79c0ff;
  --pr-glow: #58a6ff;
  --pr-noise-opacity: 0.02;
  --pr-glow-strength: 0.1;
}

[data-theme="retro-arcade"] {
  --pr-bg: #0a0a0e;
  --pr-surface: #12121a;
  --pr-surface2: #1a1a26;
  --pr-text: #f0e6ff;
  --pr-muted: #a090c0;
  --pr-border: rgba(240,230,255,0.15);
  --pr-brand: #e94560;
  --pr-brand2: #c73e54;
  --pr-accent: #ff6b9d;
  --pr-glow: #e94560;
  --pr-noise-opacity: 0.03;
  --pr-glow-strength: 0.2;
  --pr-scanlines-opacity: 0.04;
}

/* Scene backgrounds (Vite public path — /themes/scenes/*.webp) */
:root, [data-scene="studio"] {
  --pr-scene-bg: url("/themes/scenes/studio.webp"), linear-gradient(180deg, #0b0f14 0%, #121826 50%, #0b0f14 100%);
  --pr-scene-tint: radial-gradient(1200px 800px at 50% 20%, rgba(0,0,0,0.2), rgba(0,0,0,0.85));
}

[data-scene="mountains"] {
  --pr-scene-bg: url("/themes/scenes/mountains.webp"), linear-gradient(180deg, #0b0f14 0%, #1a2332 50%, #0f1419 100%);
  --pr-scene-tint: radial-gradient(1200px 800px at 50% 20%, rgba(0,0,0,0.15), rgba(0,0,0,0.88));
}

[data-scene="arcadeCarpet"] {
  --pr-scene-bg: url("/themes/scenes/arcade-carpet.webp"), radial-gradient(ellipse 120% 80% at 50% 100%, #1a0a2e 0%, #0b0f14 60%);
  --pr-scene-tint: radial-gradient(1200px 800px at 50% 15%, rgba(0,0,0,0.15), rgba(0,0,0,0.9));
}

[data-motion="standard"] {
  --pr-motion-fast: 1;
  --pr-motion-med: 1;
  --pr-motion-slow: 1;
  --pr-duration-fast: 150ms;
  --pr-duration-med: 250ms;
  --pr-duration-slow: 400ms;
}

[data-motion="calm"] {
  --pr-glow-strength: 0.15;
  --pr-motion-fast: 0.5;
  --pr-motion-med: 0.6;
  --pr-motion-slow: 0.7;
  --pr-duration-fast: 220ms;
  --pr-duration-med: 350ms;
  --pr-duration-slow: 500ms;
}

[data-motion="high-energy"] {
  --pr-glow-strength: 0.35;
  --pr-motion-fast: 1.2;
  --pr-motion-med: 1.1;
  --pr-motion-slow: 1;
  --pr-duration-fast: 90ms;
  --pr-duration-med: 200ms;
  --pr-duration-slow: 320ms;
}

/* -----------------------------------------------------------------------------
   Site-wide scene background + vignette/noise (set dressing)
   ----------------------------------------------------------------------------- */
html, body {
  background: var(--pr-bg);
}

body {
  color: var(--pr-text);
  position: relative;
  min-height: 100%;
}

body::before {
  content: "";
  position: fixed;
  inset: 0;
  z-index: -3;
  background-image: var(--pr-scene-bg);
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  filter: saturate(1.05) contrast(1.05);
  transform: scale(1.02);
  pointer-events: none;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  z-index: -2;
  background: var(--pr-scene-tint);
  pointer-events: none;
}

html::before {
  content: "";
  position: fixed;
  inset: 0;
  z-index: -1;
  pointer-events: none;
  background:
    radial-gradient(1200px 900px at 50% 10%, rgba(255,255,255,0.04), rgba(0,0,0, var(--pr-vignette-opacity, 0.55))),
    repeating-linear-gradient(
      to bottom,
      rgba(255,255,255, var(--pr-scanlines-opacity, 0)) 0px,
      rgba(255,255,255, var(--pr-scanlines-opacity, 0)) 1px,
      transparent 3px,
      transparent 6px
    );
  mix-blend-mode: overlay;
  opacity: 1;
}

/* -----------------------------------------------------------------------------
   Safe baseline: decorative layers never block clicks; app content above.
   Prevents ThemeLab / game shells from having "only top section clickable".
   ----------------------------------------------------------------------------- */
.pr-scene,
.pr-scene-layer,
.pr-scene > *,
.pr-bg,
.theme-scene,
.theme-scene-layer,
.pr-gameshell__scene,
.pr-gameshell__scene *,
.pr-vignette,
.pr-noise,
.pr-scanlines,
.pr-lightbeams {
  pointer-events: none !important;
}

/* Pseudo-elements used as decorative overlays must not capture clicks */
body::before,
body::after,
html::before,
.pr-page::before,
.pr-page::after,
.pr-gameshell::before,
.pr-gameshell::after,
.pr-scene::before,
.pr-scene::after {
  pointer-events: none !important;
}

.pr-app,
#root {
  position: relative;
  z-index: 1;
}

/* Theme/scene/motion variants for stage and scene layer (optional overrides) */
[data-theme="retro-arcade"] .pr-stage {
  box-shadow: 0 0 24px color-mix(in srgb, var(--pr-glow) 25%, transparent);
}
[data-theme="prestige"] .pr-stage {
  border-color: var(--pr-border);
}
[data-scene="arcadeCarpet"] .pr-scene-layer {
  background: var(--pr-scene-bg);
}
[data-scene="mountains"] .pr-scene-layer {
  background: var(--pr-scene-bg);
}
[data-motion="high-energy"] .pr-reveal,
[data-motion="high-energy"] [class*="reveal"] {
  transition-duration: var(--pr-duration-fast);
}

/* -----------------------------------------------------------------------------
   Stage frame polish (TV + Player top-stage preview) — one class for all game views
   ----------------------------------------------------------------------------- */
.stage-frame,
.gshell__stage,
.pr-stage,
.player-layout__stage {
  position: relative;
  background: color-mix(in srgb, var(--pr-surface) 88%, transparent);
  border: 1px solid color-mix(in srgb, var(--pr-border) 70%, transparent);
  border-radius: var(--pr-radius-xl);
  box-shadow: var(--pr-shadow-lg);
  overflow: hidden;
}

.stage-frame::before,
.gshell__stage::before,
.pr-stage::before,
.player-layout__stage::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  background-image: var(--stage-overlay);
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  opacity: var(--pr-noise-opacity, 0.14);
  mix-blend-mode: overlay;
  z-index: 0;
}

.stage-frame::after,
.gshell__stage::after,
.pr-stage::after,
.player-layout__stage::after {
  content: "";
  position: absolute;
  inset: -2px;
  pointer-events: none;
  background:
    radial-gradient(900px 500px at 50% 0%, color-mix(in srgb, var(--pr-glow) calc(18% + var(--pr-glow-strength, 0.25) * 40%), transparent), transparent 65%),
    radial-gradient(1200px 800px at 50% 30%, transparent, rgba(0,0,0, var(--pr-vignette-opacity, 0.55)));
  opacity: 1;
  z-index: 0;
}
